(this["webpackJsonpfslzrr-blog"]=this["webpackJsonpfslzrr-blog"]||[]).push([[0],{122:function(e,t,a){e.exports=a(229)},127:function(e,t,a){},229:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),c=a.n(o),l=(a(127),a(24)),i=a(8),s=a(260),u=a(265),m=a(266),d=a(286),p=a(270),f=a(288),h=a(283),g=a(279),b=a(267),E=a(48),v=a(114),C=a(110),O=a.n(C),j=a(112),k=a.n(j),x=a(77),y=a.n(x),w=a(111),I=a.n(w),S=a(280),_=a(113),N=Object(_.a)({palette:{primary:{main:"#14213D"},secondary:{main:"#FCA311"},contrastThreshold:3,tonalOffset:.2},typography:{fontFamily:["Lato","sans-serif"].join(",")},shape:{borderRadius:0}}),A=a(105),F=a.n(A),W=a(7),R=a.n(W),B=a(11),T=a(47),P=a.n(T),q="https://obscure-chamber-16473.herokuapp.com",U={"Access-Control-Allow-Origin":"*"},z=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){},s=Object(n.useState)(r),u=Object(i.a)(s,2),m=u[0],d=u[1],p=Object(n.useState)(null),f=Object(i.a)(p,2),h=f[0],g=f[1],b=Object(n.useState)(0),E=Object(i.a)(b,2),v=E[0],C=E[1],O=function(e){e&&d(e),C(v+1)};return Object(n.useEffect)((function(){var n="get"===e?Object(l.a)({params:a,innerData:m,headers:U},o):Object(l.a)({params:a,headers:U},o);function r(){return(r=Object(B.a)(R.a.mark((function a(){var r;return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("get"!==e){a.next=6;break}return a.next=3,P.a[e](q+t,n);case 3:a.t0=a.sent,a.next=9;break;case 6:return a.next=8,P.a[e](q+t,m,n);case 8:a.t0=a.sent;case 9:r=a.t0,g(r.data),c(r.data);case 12:case"end":return a.stop()}}),a)})))).apply(this,arguments)}!function(){r.apply(this,arguments)}()}),[v]),[h,O]},D=function(){var e=Object(B.a)(R.a.mark((function e(t){var a,n,r,o=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:{},n=o.length>2&&void 0!==o[2]?o[2]:{},r=o.length>3&&void 0!==o[3]?o[3]:{},e.next=5,P.a.post(q+t,n,Object(l.a)({params:a},r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(B.a)(R.a.mark((function e(t){var a,n,r,o=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:{},n=o.length>2&&void 0!==o[2]?o[2]:{},r=o.length>3&&void 0!==o[3]?o[3]:{},e.next=5,P.a.put(q+t,n,Object(l.a)({params:a},r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(B.a)(R.a.mark((function e(t){var a,n,r=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},n=r.length>2&&void 0!==r[2]?r[2]:{},e.next=4,P.a.delete(q+t,Object(l.a)({params:a},n));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=Object(n.createContext)(null),J=a(40),G=a.n(J),V=a(230),H=a(263),$=a(103),K=a.n($),Q=Object(s.a)((function(e){return{markdown:{color:e.palette.text.primary,fontFamily:e.typography.fontFamily,"& > h1, & > h2":{fontWeight:400},"& > h3, & > h4, & > h5":{fontWeight:400},"& > h6":{fontWeight:400},"& > p":{fontWeight:400},"& > pre":{position:"relative",marginLeft:-16,marginRigth:0,padding:16,width:"calc(100% + 32px)",backgroundColor:e.palette.grey[200],whiteSpace:"pre-wrap"},"& > p > code":{position:"relative",margin:0,padding:8,backgroundColor:e.palette.grey[200]},"& a":{color:e.palette.secondary.main},"& img":{width:"calc(100% + 32px)",margin:"0 -16px"}}}}));var X=function(e){var t=Q();return(r.a.createElement(K.a,{source:e.children,className:t.markdown}))},Z=Object(s.a)((function(e){return{root:{padding:16,transition:"all 0.2s","&:hover":{transform:"scale(1.01)"},"&:hover .post-title":{color:e.palette.secondary.main}},header:{marginBottom:8},dateContainer:{display:"flex",flexDirection:"column",alignItems:"flex-end"},dateText:{lineHeight:"unset",fontSize:"0.5rem"},markdownWrapper:{position:"relative",overflow:"hidden",maxHeight:400,"&::after":{content:'" "',display:"block",position:"absolute",top:0,left:0,height:"100%",width:"100%",background:"linear-gradient(to bottom, transparent 50%, white 100%)"}},readMoreButton:{position:"absolute",right:0,bottom:0,zIndex:1,transition:"all 0.2s","&:hover":{transform:"scale(1.02)"}}}}));var ee=function(e){var t=e.post,a=t.title,n=t.content,o=t.updatedDate,c=t.author,l=G()(o),i=Z();return r.a.createElement(V.a,{className:i.root},r.a.createElement("div",{className:i.header},r.a.createElement(E.a,{variant:"h4",className:"post-title"},a),r.a.createElement("div",{className:i.info},r.a.createElement(E.a,{variant:"caption"},c.name),r.a.createElement("span",null," - "),r.a.createElement(E.a,{variant:"caption",className:i.dateText},l.format("DD/MM/YYYY")),r.a.createElement(E.a,{variant:"caption",className:i.dateText},l.format("hh:mm A"))),r.a.createElement("div",null)),r.a.createElement("div",{className:i.markdownWrapper},r.a.createElement(H.a,{variant:"contained",color:"secondary",className:i.readMoreButton,onClick:e.onClick},"Read More"),r.a.createElement(X,null,n)))},te=a(264),ae=a(285),ne=a(272),re=a(284),oe=a(63),ce=a.n(oe),le=r.a.forwardRef((function(e,t){return r.a.createElement(te.a,Object.assign({direction:"up",ref:t},e))})),ie=Object(s.a)((function(e){return{icon:{marginRight:e.spacing(2)},title:{flexGrow:1},container:{position:"relative",top:64,left:0,right:0,bottom:0,width:"100vw",maxWidth:800,padding:16,marginRight:"auto",marginLeft:"auto"}}}));var se=function(e){var t=e.post,a=e.isOpen,o=e.onClose,c=e.onCreated,l=e.onUpdated,s=Object(n.useState)(t?t.title:""),p=Object(i.a)(s,2),f=p[0],h=p[1],g=Object(n.useState)(t?t.content:""),v=Object(i.a)(g,2),C=v[0],O=v[1],j=Object(n.useState)(!!t&&t.isPublic),k=Object(i.a)(j,2),x=k[0],y=k[1],w=function(e){return function(t){return e(t.target.value.trim())}},I=function(){var t=Object(B.a)(R.a.mark((function t(){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==f.trim()&&""!==C.trim()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,D("/post",{},{title:f,content:C,isPublic:x},{headers:{Authorization:e.token}});case 4:o(),c();case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),S=function(){var a=Object(B.a)(R.a.mark((function a(n){return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(""!==n.title.trim()&&""!==n.content.trim()){a.next=2;break}return a.abrupt("return");case 2:if(n.title!==t.title||n.content!==t.content||n.isPublic!==t.isPublic){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,L("/post/".concat(t._id),{},n,{headers:{Authorization:e.token}});case 6:o(),l();case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),_=function(){var e=Object(B.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({title:f,content:C,isPublic:x,isUpdating:!1});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(B.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({title:f,content:C,isPublic:x,isUpdating:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=ie();return r.a.createElement(ae.a,{fullScreen:!0,open:a,onClose:o,TransitionComponent:le},r.a.createElement(u.a,{color:"secondary"},r.a.createElement(m.a,null,r.a.createElement(b.a,{edge:"start","aria-label":"close",onClick:o},r.a.createElement(ce.a,null)),r.a.createElement(E.a,{variant:"h6",className:A.title},"Writing New Post"),!t&&r.a.createElement(H.a,{disableElevation:!0,variant:"contained",color:"primary",onClick:I},"Save & Publish"),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{disableElevation:!0,variant:"contained",color:"primary",onClick:_},"Edit & Publish"),r.a.createElement("p",null,"\u2003"),r.a.createElement(H.a,{disableElevation:!0,variant:"contained",color:"primary",onClick:N},"Update & Publish")))),r.a.createElement("div",{className:A.container},r.a.createElement(E.a,{variant:"h4"},"Let's Start!"),r.a.createElement(d.a,{fullWidth:!0,margin:"dense",id:"title",label:"Title",defaultValue:t?t.title:void 0,onChange:w(h)}),r.a.createElement(ne.a,{control:r.a.createElement(re.a,{checked:x,onChange:function(){return y(!x)},inputProps:{"aria-label":"is public"}}),label:"Make Public"}),r.a.createElement(d.a,{autoFocus:!0,fullWidth:!0,multiline:!0,margin:"dense",id:"content",label:"Content",defaultValue:t?t.content:void 0,onChange:w(O)})))},ue=Object(s.a)((function(e){return{titleContent:{display:"flex",alignItem:"center",marginBottom:16,color:"white"},blogPreview:{marginBottom:16,"&:last-of-type":{marginBottom:0}}}}));var me=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),o=a[0],c=a[1],l=function(){return c(!0)},s=function(){return c(!1)},u=z("put","/post",{},e.query,{headers:{Authorization:e.token}}),m=Object(i.a)(u,2),d=m[0],p=m[1];Object(n.useEffect)((function(){d&&p(e.query)}),[e.requestAgain]);var f=ue();return(r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.Consumer,null,(function(e){return r.a.createElement("div",{className:f.titleContent},r.a.createElement(E.a,{variant:"h4"},"Latests Posts"),e.user&&r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{color:"secondary","aria-label":"add",onClick:l},r.a.createElement(F.a,null)),r.a.createElement(se,{isOpen:o,onClose:s,onCreated:p,token:e.token})))})),r.a.createElement("div",null,!d&&r.a.createElement("p",null,"loading..."),d&&d.map((function(t){return r.a.createElement("div",{key:t._id,className:f.blogPreview},r.a.createElement(ee,{post:t,onClick:function(){return e.onPostClick(t._id)}}))})))))},de=a(274),pe=a(67),fe=a.n(pe),he=a(106),ge=a.n(he),be=a(43),Ee=a.n(be),ve=a(107),Ce=a.n(ve),Oe=a(273),je=a(66),ke=a.n(je),xe=Object(s.a)((function(e){return{container:{padding:"8px 16px 16px 16px"},buttonContainer:{display:"flex",justifyContent:"flex-end",marginBottom:16},cancelButton:{marginRight:16}}}));var ye=function(e){var t=e._postId,a=e.onCreatedComment,o=e.isSubcomment,c=Object(n.useState)("Great post!"),l=Object(i.a)(c,2),s=l[0],u=l[1],m=xe();return r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{className:m.container},r.a.createElement(d.a,{fullWidth:!0,margin:"dense",id:"newComment",label:"New Comment",defaultValue:"Great post!",onChange:function(e){return u(e.target.value)}})),r.a.createElement("p",null),r.a.createElement("div",{className:m.buttonContainer},r.a.createElement(Y.Consumer,null,(function(n){return r.a.createElement(r.a.Fragment,null,o&&r.a.createElement(H.a,{edge:"end",variant:"contained",onClick:e.onCancel,className:m.cancelButton},"Cancel"),r.a.createElement(H.a,{edge:"end",variant:"contained",color:"secondary",onClick:(c=n.token,Object(B.a)(R.a.mark((function n(){var r;return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=o?"/comment/".concat(t,"/").concat(e._parentCommentId):"/comment/".concat(t),n.next=3,D(r,{},{content:s},{headers:{Authorization:c}});case 3:a();case 4:case"end":return n.stop()}}),n)}))))},"Add Comment"));var c}))))},we=Object(s.a)((function(e){return{root:{padding:"8px 16px 16px 16px"},titleContainer:{display:"flex",alignItems:"center",justifyContent:"space-between"},buttonContainer:{display:"flex",justifyContent:"flex-end",alignItems:"center"},reply:{marginLeft:16,"&:hover":{cursor:"pointer"}},comment:{marginLeft:16}}}));var Ie=function e(t){var a=t.comment,o=a._id,c=a.author,l=a.content,s=a.createdDate,u=a.isApproved,m=a.replies,d=Object(n.useState)(!1),p=Object(i.a)(d,2),f=p[0],h=p[1],g=function(e,a){return Object(B.a)(R.a.mark((function n(){var r;return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t._parentCommentId?"/comment/".concat(t._postId,"/").concat(t._parentCommentId,"/").concat(a):"/comment/".concat(t._postId,"/").concat(a),console.log("delete:",r),n.next=4,M(r,{},{headers:{Authorization:e}});case 4:t.onDeletedComment();case 5:case"end":return n.stop()}}),n)})))},v=G()(s),C=we();return r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{className:C.root},r.a.createElement("div",{className:C.titleContainer},r.a.createElement(E.a,null,c.name),r.a.createElement(Y.Consumer,null,(function(e){return r.a.createElement("div",{className:C.buttonContainer},r.a.createElement(E.a,{variant:"overline",color:"textSecondary"},v.format("DD/MM/YYYY hh:mm a")),!u&&t._postAuthorId===e.user._id&&r.a.createElement(b.a,{color:"secondary","aria-label":"delete",onClick:(a=e.token,n=o,Object(B.a)(R.a.mark((function e(){var r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._parentCommentId?"/comment/".concat(t._postId,"/").concat(t._parentCommentId,"/").concat(n):"/comment/".concat(t._postId,"/").concat(n),e.next=3,L(r,{},{},{headers:{Authorization:a}});case 3:t.onDeletedComment();case 4:case"end":return e.stop()}}),e)}))))},r.a.createElement(ke.a,null)),(c._id===e.user._id||t._postAuthorId===e.user._id)&&r.a.createElement(b.a,{color:"secondary","aria-label":"delete",onClick:g(e.token,o)},r.a.createElement(Ee.a,null)));var a,n}))),r.a.createElement(E.a,{color:"textSecondary"},l)),m&&r.a.createElement(r.a.Fragment,null,!f&&r.a.createElement("p",{style:{marginTop:"8px"}},r.a.createElement(Oe.a,{color:"secondary",className:C.reply,onClick:function(){return h(!0)}},"Reply")),f&&r.a.createElement("div",{style:{marginLeft:"16px",paddingTop:"8px"}},r.a.createElement(ye,{isSubcomment:!0,_postId:t._postId,_parentCommentId:o,onCancel:function(){return h(!1)},onCreatedComment:t.onCreatedComment})),r.a.createElement(Y.Consumer,null,(function(a){return m.map((function(n){return(n.isApproved||t._postAuthorId===a.user._id)&&r.a.createElement("div",{key:n._id,className:C.comment},r.a.createElement(e,{comment:n,_postId:t._postId,_parentCommentId:o,_postAuthorId:t._postAuthorId,onDeletedComment:t.onDeletedComment}))}))}))))},Se=Object(s.a)((function(e){return{titleContainer:{display:"flex",marginBottom:16},back:{color:"white"},titleTextContainer:{color:"white"},titileButtonsContainer:{display:"flex",alignItems:"center"},date:{lineHeight:"unset"},contentContainer:{padding:16,marginBottom:16},titleComments:{marginBottom:16},emptyComments:{marginBottom:16},comment:{marginBottom:16},fab:{position:"fixed",bottom:16,right:16,display:"flex",alignItems:"center","& > *:first-child":{marginRight:16}}}}));var _e=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),o=a[0],c=a[1],l=function(){return c(!0)},s=function(){return c(!1)},u=z("get","/post/".concat(e._id),{},{},{headers:{Authorization:e.token}}),m=Object(i.a)(u,2),d=m[0],p=m[1],f=function(){var t=Object(B.a)(R.a.mark((function t(){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M("/post/".concat(d._id),{},{headers:{Authorization:e.token}});case 2:e.onBack();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(){var t=Object(B.a)(R.a.mark((function t(){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D("/post/".concat(d._id,"/clap"),{},{},{headers:{Authorization:e.token}});case 2:p();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=Se();if(!d)return r.a.createElement(r.a.Fragment,null);var v=G()(d.updatedDate);return(r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:g.titleContainer},r.a.createElement(b.a,{edge:"start",color:"inherit","aria-label":"back",onClick:e.onBack,className:g.back},r.a.createElement(fe.a,null)),r.a.createElement("div",{className:g.titleTextContainer},r.a.createElement(Y.Consumer,null,(function(e){return r.a.createElement("div",{className:g.titileButtonsContainer},r.a.createElement(E.a,{variant:"h4"},d.title),e.user&&e.user._id===d.author._id&&r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{color:"secondary","aria-label":"edit",onClick:l},r.a.createElement(ge.a,null)),r.a.createElement(b.a,{color:"secondary","aria-label":"delete",onClick:f},r.a.createElement(Ee.a,null)),r.a.createElement(se,{token:e.token,post:d,isOpen:o,onClose:s,onUpdated:p})))})),r.a.createElement(E.a,{variant:"caption",className:g.date},"Last Updated - ",v.format("DD/MM/YYYY hh:mm A")))),r.a.createElement(V.a,{className:g.contentContainer},r.a.createElement(X,null,d.content)),r.a.createElement(E.a,{variant:"h5",className:g.titleComments},"Comments"),r.a.createElement(Y.Consumer,null,(function(e){return r.a.createElement(r.a.Fragment,null,d.comments.length>0&&d.comments.map((function(t){return(t.isApproved||d.author._id===e.user._id)&&r.a.createElement("div",{key:t._id,className:g.comment},r.a.createElement(Ie,{comment:t,_postId:d._id,_postAuthorId:d.author._id,onDeletedComment:p,onCreatedComment:p}))})),e.user&&r.a.createElement(ye,{_postId:d._id,onCreatedComment:p}))})),r.a.createElement("div",{className:g.fab},r.a.createElement(E.a,null,d.claps),r.a.createElement(de.a,{color:"secondary","aria-label":"hot",onClick:h},r.a.createElement(Ce.a,null)))))},Ne=Object(s.a)((function(e){return{heroText:{position:"absolute",zIndex:-1,left:0,top:64,height:"calc(30vh - 64px)",width:"100vw",color:"white",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},contentContainer:{marginTop:"calc(30vh - 64px)"}}}));var Ae=function(e){var t=Ne();return(r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:t.heroText},r.a.createElement(E.a,{variant:"h4"},"Welcome!"),r.a.createElement(E.a,null,"This is a community to shere our knowledge."),r.a.createElement(E.a,null,"I invite you to add the most experienced Software Engineer as friends!"),r.a.createElement(E.a,{variant:"caption"},"Trust me... They'll be charmed")),r.a.createElement("div",{className:t.contentContainer},"alksmd")))};var Fe=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(""),s=Object(i.a)(l,2),u=s[0],m=s[1],p=function(e){return function(t){return e(t.target.value.trim())}},f=function(){var t=Object(B.a)(R.a.mark((function t(){var a,n,r,c;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==o.trim()&&""!==u){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,D("/auth/login",{},{email:o,password:u});case 4:a=t.sent,n=a.data,r=n.token,c=n.user,e.onLoggedIn(r,c);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null,"Log In"),r.a.createElement(d.a,{autoFocus:!0,fullWidth:!0,margin:"dense",id:"email",label:"Email",type:"email",onChange:p(c)}),r.a.createElement(d.a,{fullWidth:!0,margin:"dense",id:"password",label:"Password",type:"password",onChange:p(m)}),r.a.createElement("p",null),r.a.createElement(H.a,{fullWidth:!0,disableElevation:!0,variant:"contained",color:"secondary",onClick:f},"Log In"),r.a.createElement("p",null),r.a.createElement(H.a,{fullWidth:!0,disableElevation:!0,variant:"contained",color:"primary",onClick:e.onSignUp},"Sign Up"))},We=Object(s.a)((function(e){return{titleContainer:{display:"flex",alignItems:"center",marginTop:-12}}}));var Re=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(""),s=Object(i.a)(l,2),u=s[0],m=s[1],p=Object(n.useState)(""),f=Object(i.a)(p,2),h=f[0],g=f[1],v=Object(n.useState)(""),C=Object(i.a)(v,2),O=C[0],j=C[1],k=function(e){return function(t){return e(t.target.value.trim())}},x=function(){var t=Object(B.a)(R.a.mark((function t(){var a,n,r,c;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==o.trim()&&""!==u.trim()&&""!==h&&""!==O){t.next=2;break}return t.abrupt("return");case 2:if(h===O){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,D("/user",{},{name:o,email:u,password:h});case 6:a=t.sent,n=a.data,r=n.token,c=n.user,e.onLoggedIn(r,c);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y=We();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:y.titleContainer},r.a.createElement(b.a,{edge:"start",color:"inherit","aria-label":"back",onClick:e.onBack},r.a.createElement(fe.a,null)),r.a.createElement(E.a,null,"Sign Up")),r.a.createElement(d.a,{autoFocus:!0,fullWidth:!0,margin:"dense",id:"name",label:"Name",onChange:k(c)}),r.a.createElement(d.a,{fullWidth:!0,margin:"dense",id:"email",label:"Email",type:"email",onChange:k(m)}),r.a.createElement(d.a,{fullWidth:!0,margin:"dense",id:"password",label:"Password",type:"password",onChange:k(g)}),r.a.createElement(d.a,{fullWidth:!0,margin:"dense",id:"confirmPassword",label:"Confirm Password",type:"password",onChange:k(j)}),r.a.createElement("p",null),r.a.createElement(H.a,{fullWidth:!0,disableElevation:!0,variant:"contained",color:"secondary",onClick:x},"Create Account"))},Be=a(271),Te=a(231),Pe=a(276),qe=a(277),Ue=a(278),ze=a(108),De=a.n(ze),Le=a(275),Me=Object(s.a)((function(e){return{listItemRoot:{paddingRight:110,paddingLeft:0}}}));var Ye=function(e){var t=e.isOpen,a=e.isViewingFriends,n=e.friends,o=e.friendRequests,c=e.onClose,l=e.onRemoveFriend,i=e.onAcceptRequest,s=e.onDeclineRequest,u=a?n:o,m=Me();return r.a.createElement(ae.a,{open:t,onClose:c},r.a.createElement(Le.a,null,r.a.createElement(E.a,{variant:"h6"},a?"Friends":"Friend Requests"),r.a.createElement(Be.a,null,0===u.length&&r.a.createElement(E.a,null,a?"You suck and don't have any friends :D":"Nobody want's to be your friend... yet :)"),u.length>0&&u.map((function(e){return r.a.createElement(Te.a,{key:e._id,className:m.listItemRoot},r.a.createElement(Pe.a,{primary:e.name,secondary:e.email}),r.a.createElement(qe.a,null,a&&r.a.createElement(b.a,{edge:"end","aria-label":"remove friend",onClick:l(e._id)},r.a.createElement(Ee.a,null)),!a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{edge:"start","aria-label":"decline friend request",onClick:s(e._id)},r.a.createElement(ce.a,null)),r.a.createElement(b.a,{color:"primary",edge:"end","aria-label":"accept friend request",onClick:i(e._id)},r.a.createElement(ke.a,null)))))})))))},Je=Object(s.a)((function(e){return{list:{marginLeft:-16,width:"calc(100% + 32px)"}}}));var Ge=function(e){var t=z("get","/auth",{},{},{headers:{Authorization:e.token}},(function(t){var a=e.token.slice(7);e.setAuth(a,t)})),a=Object(i.a)(t,2),o=a[0],c=a[1],l=function(){var t=Object(B.a)(R.a.mark((function t(){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.onLogOut();case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=Object(n.useState)(!1),u=Object(i.a)(s,2),m=u[0],d=u[1],p=Object(n.useState)(!1),f=Object(i.a)(p,2),h=f[0],g=f[1],b=function(){return d(!0)},v=Je();return o?r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null,o.name),r.a.createElement(E.a,{variant:"caption"},o.email),r.a.createElement(Be.a,{className:v.list},r.a.createElement(Te.a,null,r.a.createElement(ne.a,{control:r.a.createElement(re.a,{checked:e.justUsers,onChange:e.onToggleJustUsers,inputProps:{"aria-label":"is public"}}),label:"Just My Posts"})),r.a.createElement(Te.a,{button:!0,onClick:function(){g(!0),b()}},r.a.createElement(Pe.a,{primary:"Friends"})),r.a.createElement(Te.a,{button:!0,onClick:function(){g(!1),b()}},r.a.createElement(Pe.a,{primary:"Friend Requests"}),0!==o.friendRequests.length&&r.a.createElement(qe.a,null,r.a.createElement(Ue.a,{badgeContent:o.friendRequests.length,color:"secondary"},r.a.createElement(De.a,null))))),r.a.createElement(H.a,{fullWidth:!0,disableElevation:!0,variant:"contained",onClick:l},"Log Out"),r.a.createElement(Ye,{isOpen:m,isViewingFriends:h,friends:o.friends,friendRequests:o.friendRequests,onClose:function(){return d(!1)},onRemoveFriend:function(t){return Object(B.a)(R.a.mark((function a(){return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,M("/friend/".concat(t),{},{headers:{Authorization:e.token}});case 2:c();case 3:case"end":return a.stop()}}),a)})))},onAcceptRequest:function(t){return Object(B.a)(R.a.mark((function a(){return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,D("/friend",{},{_friendId:t},{headers:{Authorization:e.token}});case 2:c();case 3:case"end":return a.stop()}}),a)})))},onDeclineRequest:function(t){return Object(B.a)(R.a.mark((function a(){return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,M("/friend/request/".concat(t),{},{headers:{Authorization:e.token}});case 2:c();case 3:case"end":return a.stop()}}),a)})))}})):r.a.createElement(r.a.Fragment,null)},Ve=Object(s.a)((function(e){return{popover:{padding:"8px 16px 16px 16px",width:200,maxWidth:200}}}));var He=function(e){var t=Object(n.useState)(!0),a=Object(i.a)(t,2),o=a[0],c=a[1],l=function(){return c(!1)},s=function(){return c(!0)},u=Ve();return r.a.createElement("div",{className:u.popover},r.a.createElement(Y.Consumer,null,(function(t){return r.a.createElement(r.a.Fragment,null,!t.user&&o&&r.a.createElement(Fe,{onSignUp:l,onLoggedIn:t.setAuth}),!t.user&&!o&&r.a.createElement(Re,{onBack:s,onLoggedIn:function(e,a){t.setAuth(e,a),s()}}),t.user&&r.a.createElement(Ge,{user:t.user,token:t.token,justUsers:e.justUsers,onToggleJustUsers:e.onToggleJustUsers,setAuth:t.setAuth,onLogOut:t.clearAuth}))})))},$e=a(109),Ke=a.n($e),Qe=Object(s.a)((function(e){return{root:{padding:"8px 16px 16px 16px"},listItem:{padding:0}}}));var Xe=function(e){var t=e.isOpen,a=e.onClose,o=Object(n.useState)("<null>"),c=Object(i.a)(o,2),l=c[0],s=c[1],u=z("get","/user/".concat(l),{},{},{headers:{Authorization:e.token}}),m=Object(i.a)(u,2),p=m[0],f=m[1],h=Qe();return r.a.createElement(ae.a,{open:t,onClose:a,"aria-labelledby":"search users"},r.a.createElement(Le.a,{className:h.root},r.a.createElement(E.a,{variant:"h6"},"Search Users"),r.a.createElement(d.a,{autoFocus:!0,fullWidth:!0,variant:"filled",margin:"dense",id:"search",label:"Name to search",onChange:function(e){var t=e.target.value.trim();s(""===t?"<null>":t),f()}}),r.a.createElement(Be.a,null,e.user&&p&&p.map((function(t){var a,n=t.friendRequests&&t.friendRequests.find((function(t){return t===e.user._id})),o=t.friends&&t.friends.find((function(t){return t===e.user._id}));return r.a.createElement(Te.a,{key:t._id,className:h.listItem},r.a.createElement(Pe.a,{primary:t.name,secondary:t.email}),r.a.createElement(qe.a,null,!o&&r.a.createElement(b.a,{color:"primary",edge:"end","aria-label":"send friend request",disabled:n,onClick:(a=t._id,Object(B.a)(R.a.mark((function t(){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D("/friend/request",{},{_friendId:a},{headers:{Authorization:e.token}});case 2:f();case 3:case"end":return t.stop()}}),t)}))))},r.a.createElement(Ke.a,null))))})),(!p||0===p.length)&&r.a.createElement(Te.a,{className:h.listItem},r.a.createElement(Pe.a,{primary:"No users found :("})))))},Ze=Object(s.a)((function(e){return{icon:{marginRight:e.spacing(2)},searchContainer:{flexGrow:1,display:"flex",justifyContent:"space-evenly","& > *":{flexGrow:1},"& *":{color:"rgba(255, 255, 255, 0.7)"},marginRight:24},heroImage:{position:"absolute",zIndex:-1,left:0,top:0,height:"30vh",width:"100vw",backgroundColor:e.palette.primary.light},container:{padding:16,maxWidth:800,margin:"auto"}}}));function et(){var e=Object(n.useState)({}),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!1),s=Object(i.a)(c,2),C=s[0],j=s[1],x=Object(n.useState)(""),w=Object(i.a)(x,2),S=w[0],_=w[1],N=Object(n.useState)(""),A=Object(i.a)(N,2),F=A[0],W=A[1],R=Object(n.useState)(1),B=Object(i.a)(R,2),T=B[0],P=B[1],q=Object(n.useState)(1),U=Object(i.a)(q,2),z=U[0],D=U[1],L=function(e,t){e(t)},M=Object(n.useState)(localStorage.getItem("token")),J=Object(i.a)(M,2),G=J[0],V=J[1],H=Object(n.useState)(JSON.parse(localStorage.getItem("user"))),$=Object(i.a)(H,2),K=$[0],Q=$[1],X=Object(n.useState)(!1),Z=Object(i.a)(X,2),ee=Z[0],te=Z[1],ae=function(){return te(!0)},ne=Object(n.useState)(null),re=Object(i.a)(ne,2),oe=re[0],ce=re[1],le=function(){return ce(null)},ie=Object(n.useState)(!1),se=Object(i.a)(ie,2),ue=se[0],de=se[1],pe=Object(n.useState)(null),fe=Object(i.a)(pe,2),he=fe[0],ge=fe[1],be=Ze();return r.a.createElement(Y.Provider,{value:{user:K,token:G,setAuth:function(e,t){var a="Bearer ".concat(e);V(a),Q(t),localStorage.setItem("token",a),localStorage.setItem("user",JSON.stringify(t))},clearAuth:function(){V(null),Q(null),localStorage.removeItem("token"),localStorage.removeItem("user"),le()}}},r.a.createElement(u.a,{position:"static"},r.a.createElement(m.a,null,r.a.createElement(O.a,{className:be.icon}),K&&!oe&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:be.searchContainer},r.a.createElement(d.a,{fullWidth:!0,variant:"filled",color:"secondary",label:"User",onChange:function(e){return L(_,e.target.value.trim())}}),r.a.createElement(d.a,{fullWidth:!0,variant:"filled",color:"secondary",label:"Title",onChange:function(e){return L(W,e.target.value.trim())}}),r.a.createElement(p.a,{fullWidth:!0,variant:"filled",color:"secondary"},r.a.createElement(f.a,{id:"order"},"Order By"),r.a.createElement(h.a,{labelId:"order",id:"order",value:T,onChange:function(e){return L(P,e.target.value)}},r.a.createElement(g.a,{value:1},"Latest"),r.a.createElement(g.a,{value:2},"Most Claps"))),r.a.createElement(b.a,{edge:"end","aria-label":"menu",onClick:function(){var e=""===S?{}:{name:S},t=""===F?Object(l.a)({},e):Object(l.a)(Object(l.a)({},e),{},{title:F}),a=Object(l.a)(Object(l.a)({},t),{},{justUsers:C,orderBy:1===T?"latest":"claps"});o(a),D(z+1)}},r.a.createElement(I.a,null))),r.a.createElement(b.a,{edge:"start",color:"inherit","aria-label":"menu",ref:he,onClick:ae},r.a.createElement(y.a,null))),K&&oe&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:be.searchContainer},r.a.createElement(E.a,{variant:"h6"},"TechBlogs")),r.a.createElement(b.a,{edge:"start",color:"inherit","aria-label":"menu",ref:he,onClick:ae},r.a.createElement(y.a,null))),!K&&r.a.createElement("div",{className:be.searchContainer},r.a.createElement(E.a,{variant:"h6"},"TechBlogs")),r.a.createElement(b.a,{color:"inherit","aria-label":"menu",ref:he,onClick:function(e){ge(e.currentTarget),de(!0)}},r.a.createElement(k.a,null)))),r.a.createElement(Xe,{isOpen:ee,user:K,setUser:Q,token:G,onClose:function(){return te(!1)}}),r.a.createElement(v.a,{open:ue,onClose:function(){return de(!1)},anchorEl:he},r.a.createElement(He,{justUsers:C,onToggleJustUsers:function(){return j(!C)}})),r.a.createElement("div",{className:be.heroImage}),r.a.createElement("div",{className:be.container},K&&oe&&r.a.createElement(_e,{_id:oe,token:G,onBack:le}),K&&!oe&&r.a.createElement(me,{token:G,query:a,requestAgain:z,onPostClick:function(e){return ce(e)}}),!K&&r.a.createElement(Ae,null)))}var tt=function(){return r.a.createElement(S.a,{theme:N},r.a.createElement(et,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var at=a(281);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(at.a,null),r.a.createElement(tt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[122,1,2]]]);
//# sourceMappingURL=main.31aa7c1a.chunk.js.map